!function(e) {
	var d = 0;
	var c = {
		loginUrl : "/",
		className : undefined,
		resize : undefined
	};
	var i = {
		closeBtnTemplate : '<button type="button" class="navTabsCloseBtn" title="关闭" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>',
		noCloseClass : "noclose",
		prefixKey : "bTabs_"
	};
	var g = function(j, k) {
		this.$container = j;
		this.openTabs = new Array();
		this.p = k
	};
	g.version = "1.0";
	g.prototype.init = function() {
		var l = this, n = i, k = this.$container, j = this.openTabs, m = this.p;
		e(k).addClass("bTabs");
		if (m.className) {
			e(k).addClass(m.className)
		}
		e("ul.nav-tabs a", e(k)).each(function(p, q) {
			var o = e(this).closest("li");
			if (o && !e(o).hasClass(n.noCloseClass)) {
				e(q).append(n.closeBtnTemplate)
			}
		});
		e("div.tab-content div.tab-pane", k).each(function(o, p) {
			j.push(e(this).attr("id"))
		});
		e("ul.nav-tabs", k).on("click", "button", function(o) {
			var p = e(this).parent().attr("href").replace("#", "");
			l.closeTab(p)
		});
		if (m && m.resize && e.isFunction(m.resize)) {
			e(window).off("resize.bTabs").on("resize.bTabs", function(o) {
				m.resize()
			})
		}
	};
	g.prototype.addTab = function(k, v, j, r) {
		if (!k || !v || !j) {
			console.error("新增tab时，id,title,url参数为必须传递参数！")
		}
		var u = i, s = this.$container, o = this.openTabs, l = this.p;
		var m = u.prefixKey + k;
		if (o && e.isArray(o) && o.length > 0) {
			var t = false;
			e.each(o, function(p, w) {
				if (w == m) {
					t = true;
					return false
				}
			});
			if (t) {
				e('ul.nav-tabs a[href="#' + m + '"]', s).tab("show");
				return
			}
		} else {
			o = new Array()
		}
		if (d > 7) {
			swal("您的页面打开过多，请您关闭不需要的页面！", "", "warning");
			return
		}
		d = d + 1;
		e("ul.nav-tabs", s).append(
				'<li><a href="#' + m + '" data-toggle="tab">' + v
						+ u.closeBtnTemplate + "</a></li>");
		var q = e('<div class="tab-pane" id="' + m + '"></div>');
		e("div.tab-content", s).append(q);
		e("ul.nav-tabs li:last a", s).tab("show");
		o.push(m);
		var n = function() {
			e(q)
					.append(
							'<iframe frameborder="0" scrolling="yes" style="width:100%;height:100%;border:0px;" src="'
									+ j + '"></iframe>')
		};
		if (r && e.isFunction(r)) {
			if (r()) {
				n()
			} else {
				if (l && l.loginUrl) {
					window.top.location.replace(l.loginUrl)
				}
			}
		} else {
			n()
		}
	};
	g.prototype.closeTab = function(j) {
		d = d - 1;
		var n = i, m = this.$container, k = this.openTabs;
		var r = e("#" + j);
		if (e("iframe", e(r)).size() > 0) {
			e("iframe", e(r)).remove()
		}
		e(r).remove();
		var p = e('ul.nav-tabs a[href="#' + j + '"]', m);
		var q = e(p).closest("li");
		var o = e(q).prev();
		q.remove();
		if (k && e.isArray(k) && k.length > 0) {
			var l = -1;
			e.each(k, function(s, t) {
				if (t == j) {
					l = s;
					return false
				}
			});
			if (l != -1) {
				k.splice(l, 1)
			}
		}
		if (o.size() > 0) {
			e("a", e(o)).tab("show")
		}
	};
	function h(j) {
		return this.each(function() {
			var l = e(this), k = l.data("bTabs"), m = e.extend({}, c, l.data(),
					typeof j == "object" && j);
			if (!k) {
				l.data("bTabs", (k = new g(this, m)))
			}
			k.init()
		})
	}
	function a(m, l, j, k) {
		return this.each(function() {
			if (!m || !l || !j) {
				return
			}
			var o = e(this), n = o.data("bTabs");
			if (n) {
				n.addTab(m, l, j, k)
			}
		})
	}
	function f(j) {
		return this.each(function() {
			if (!j || !title || !url) {
				return
			}
			var l = e(this), k = l.data("bTabs");
			if (k) {
				k.closeTab(j)
			}
		})
	}

	function ocTab(j) {
		return this.each(function() {
			if (!j ) {
				return
			}
			var l = e(this), k = l.data("bTabs");
			if (k) {
				k.closeTab(j)
			}
		})
	}

	var b = e.fn.bTabs;
	e.fn.bTabs = h;
	e.fn.bTabs.Constructor = g;
	e.fn.bTabsAdd = a;
	e.fn.bTabsClose = f;
	e.fn.outTabsClose = ocTab;
	e.fn.bTabs.noConflict = function() {
		e.fn.bTabs = b;
		return this
	}
}(window.jQuery);
var tabflag = true;
$(function() {
	var a = function() {
		var d = $(window).innerHeight();
		var f = $("#mainFrameHeadBar").outerHeight(true);
		var g = parseInt($("#mainFrameTabs").css("margin-top"));
		var c = $("ul.nav-tabs", $("#mainFrameTabs")).outerHeight(true) + g;
		var b = parseInt($("div.tab-content", $("#mainFrameTabs")).css(
				"margin-top"));
		var e = d - f - c - b;
		if (tabflag == true) {
			$("div.tab-content", $("#mainFrameTabs")).height(e - 142);
			tabflag = false
		}
	};
	$("a.mid").on("click", function(d) {
		d.stopPropagation();
		var b = $(this).closest("li");
		var g = $(b).attr("mid");
		var c = $(b).attr("funurl");
		var f=$(this).text();
		$("#mainFrameTabs").bTabsAdd(g,f,c);
		a()
		});
		$("#mainFrameTabs").bTabs()
		}
		);var calcHeightAdd=function(){var c=$(window).innerHeight();var e=$("#mainFrameHeadBar").outerHeight(true);var f=parseInt($("#mainFrameTabs").css("margin-top"));var b=$("ul.nav-tabs",$("#mainFrameTabs")).outerHeight(true)+f;var a=parseInt($("div.tab-content",$("#mainFrameTabs")).css("margin-top"));var d=c-e-b-a;if(tabflag==true){$("div.tab-content",$("#mainFrameTabs")).height(d-142);tabflag=false}};function openNewPage(c,b,a){$("#mainFrameTabs").bTabsAdd(c,b,a);calcHeightAdd()};